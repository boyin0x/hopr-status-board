import{r as E,j as p,F as M,T as j,a as Y,b as e,B,c as x,d as b,e as u,f as X,I as ee,g as y,h as te,i as S,k as ne,C as se,W as oe,l as ae,m as re,S as ce,n as T,R as w,u as ie,o as le,p as de,L as pe,q as he,s as ue,t as me}from"./vendor.5638074d.js";const fe=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function o(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=o(r);fetch(r.href,l)}};fe();const C=async(t,n,o,s)=>await(await fetch(`${t}${o}`,{headers:n}).catch(r=>({json:()=>s}))).json(),O=async(t,n,o,s,r)=>(await C(t,n,o,s))[r],L=(t,n)=>o=>O(t,n,"/api/v2/account/balances",Promise.resolve({[o]:""}),o),I=(t,n)=>o=>O(t,n,"/api/v2/account/addresses",Promise.resolve({[o]:""}),o),ge=(t,n)=>I(t,n)("hopr"),Ee=(t,n)=>I(t,n)("native"),Ae=(t,n)=>L(t,n)("hopr"),be=(t,n)=>L(t,n)("native"),Se=(t,n)=>C(t,n,"/api/v2/channels",Promise.resolve({})),Ce=(t,n)=>C(t,n,"/api/v2/node/info",Promise.resolve({})),Te=async t=>{const n=performance.now(),o=await(await fetch(`${t}/healthcheck/v1/version`).catch(r=>({text:()=>Promise.resolve(0)}))).text(),s=performance.now();return o?s-n:0},ve=(t,n)=>C(t,n,"/api/v2/tickets/statistics",Promise.resolve({})),we=(t,n)=>C(t,n,"/api/v2/node/version",Promise.resolve("")),N=(t,n=10)=>t.substr(0,n)+"..."+t.substr(t.length-n,n),H=t=>Number((BigInt(t)/10n**14n).toString())/1e4,k=({endpoint:t,variant:n="solid",label:o})=>{const{hasCopied:s,onCopy:r}=ie(t);return e(B,{onClick:r,leftIcon:e(le,{}),colorScheme:"teal",variant:n,children:s?`Copied ${o}`:o})},ye=({uptimer:t})=>{const[n,o]=E.exports.useState([0]);return E.exports.useEffect(()=>{const s=setTimeout(async()=>{const r=t?await t():Math.random()*10;o(l=>[...l.length>10?l.slice(1):l,r])},1e3);return()=>{clearTimeout(s)}},[n]),e("div",{style:{width:"200px"},children:e(de,{children:e(pe,{data:n,stroke:{color:{solid:[255,0,0,1]},width:2,style:"solid"}})})})},U=({host:t,nodes:n,domain:o})=>p(j,{size:"sm",children:[e(te,{children:e(b,{children:e(S,{colSpan:5,children:t})})}),e(x,{children:n[t]&&n[t].map(s=>p(E.exports.Fragment,{children:[p(b,{children:[e(u,{children:p(ne,{alignItems:"center",children:[s.address?e(se,{}):e(oe,{})," ",e(ae,{mx:"2",children:"Host"}),s.index+1,e(re,{mx:"2",colorScheme:"yellow",children:o})]})}),e(u,{children:p(ce,{direction:"row",spacing:4,children:[e(k,{endpoint:s.wsEndpoint,label:"WS"}),e(k,{endpoint:s.httpEndpoint,label:"HTTP",variant:"outline"})]})}),e(u,{children:e(T,{children:s.address?N(s.address.hopr):"No HOPR address"})}),e(u,{children:e(T,{children:s.address?N(s.address.native):"No ETH address"})}),e(u,{children:e(ye,{uptimer:s.uptimer})})]}),p(b,{children:[e(S,{colSpan:2,children:"General"}),e(S,{children:"Info"}),e(S,{children:"Channels"}),e(S,{children:"Tickets"})]}),p(b,{children:[p(u,{colSpan:2,children:[e(T,{children:"Balance"}),":",H(s.balance.hopr)," HOPR,"," ",H(s.balance.native)," ETH",e("br",{}),e(T,{children:"Version"}),":",s.version]}),e(u,{children:e(w,{src:s.info,collapsed:!0})}),e(u,{children:e(w,{src:s.channels,collapsed:!0})}),e(u,{children:e(w,{src:s.tickets,collapsed:!0})})]})]},s.address.hopr))})]},t);function Ne(){const[t,n]=E.exports.useState(""),[o,s]=E.exports.useState({}),[r,l]=E.exports.useState({}),[f,_]=E.exports.useState(""),F=(a,d=!1)=>{const i=new Headers;return d&&(i.set("Content-Type","application/json"),i.set("Accept-Content","application/json")),i.set("Authorization","Basic "+btoa(a)),i},v=async(a,d,i,g,A)=>await Promise.all([...Array(a)].map(async(m,c)=>{const h=F(d),$=await ge(i(c+1),h),W=await Ee(i(c+1),h),Z=await Ae(i(c+1),h),z=await be(i(c+1),h),Q=await we(i(c+1),h),G=()=>Te(A(c+1)),J=await Ce(i(c+1),h),V=await Se(i(c+1),h),q=await ve(i(c+1),h);return{index:c,address:{hopr:$,native:W},version:Q,uptimer:G,info:J,channels:V,tickets:q,balance:{hopr:Z,native:z},httpEndpoint:i(c+1),wsEndpoint:g(c+1)}})),P=async a=>v(5,"^^LOCAL-testing-123^^",c=>`https://1330${c}-${a.hostname}`,c=>`wss://1950${c}-${a.hostname}`,c=>`https://1808${c}-${a.hostname}`),R=async a=>v(5,"^^LOCAL-testing-123^^",c=>`http://${a.hostname}:1330${c}`,c=>`ws://${a.hostname}:1950${c}`,c=>`http://${a.hostname}:1808${c}`),K=async(a,d)=>v(1,d,h=>`http://${a.hostname}:3001`,h=>`ws://${a.hostname}:3000`,h=>`http://${a.hostname}:8080`);E.exports.useEffect(()=>{(async()=>{Object.keys(o).map(async d=>{switch(o[d].domain){case"gitpod.io":const i=await P(o[d].url);l(m=>({[d]:i,...m}));break;case"localhost":const g=await R(o[d].url);l(m=>({[d]:g,...m}));break;default:const A=await K(o[d].url,f);l(m=>({[d]:A,...m}));break}})})()},[o]);const D=a=>{if(a.key==="Enter")try{const d=new URL(t),i=d.hostname.split(".").slice(-2).join(".");s(g=>({[t]:{url:d,domain:i,token:f},...g}))}catch{}};return p(M,{children:[p(j,{variant:"simple",children:[p(Y,{children:["list of available hopr nodes"," ",e(B,{size:"sm",onClick:()=>s({}),children:"clear"})]}),p(x,{children:[e(b,{children:e(u,{children:e(U,{host:"localhost",nodes:{localhost:[{index:0,balance:{hopr:"1234000000000000000",native:"2345000000000000000"},channels:{incoming:[{type:"incoming",channelId:"0x04e50b7ddce9770f58cebe51f33b472c92d1c40384759f5a0b1025220bf15ec5",peerId:"16Uiu2HAmVfV4GKQhdECMqYmUMGLy84RjTJQxTWDcmUX5847roBar",status:"Open",balance:"10000000000000000000"}],outgoing:[{type:"incoming",channelId:"0x04e50b7ddce9770f58cebe51f33b472c92d1c40384759f5a0b1025220bf15ec5",peerId:"16Uiu2HAmVfV4GKQhdECMqYmUMGLy84RjTJQxTWDcmUX5847roBar",status:"Open",balance:"10000000000000000000"}]},info:{environment:"hardhat-localhost",announcedAddress:["/ip4/128.0.215.32/tcp/9080/p2p/16Uiu2HAm91QFjPepnwjuZWzK5pb5ZS8z8qxQRfKZJNXjkgGNUAit","/p2p/16Uiu2HAmLpqczAGfgmJchVgVk233rmB2T3DSn2gPG6JMa5brEHZ1/p2p-circuit/p2p/16Uiu2HAm91QFjPepnwjuZWzK5pb5ZS8z8qxQRfKZJNXjkgGNUAit","/ip4/127.0.0.1/tcp/9080/p2p/16Uiu2HAm91QFjPepnwjuZWzK5pb5ZS8z8qxQRfKZJNXjkgGNUAit","/ip4/192.168.178.56/tcp/9080/p2p/16Uiu2HAm91QFjPepnwjuZWzK5pb5ZS8z8qxQRfKZJNXjkgGNUAit"],listeningAddress:["/ip4/0.0.0.0/tcp/9080/p2p/16Uiu2HAm91QFjPepnwjuZWzK5pb5ZS8z8qxQRfKZJNXjkgGNUAit"],network:"hardhat",hoprToken:"0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512",hoprChannels:"0x2a54194c8fe0e3CdeAa39c49B95495aA3b44Db63",channelClosurePeriod:1},tickets:{pending:0,unredeemed:0,unredeemedValue:"string",redeemed:0,redeemedValue:"string",losingTickets:0,winProportion:0,neglected:0,rejected:0,rejectedValue:"string"},version:"1.87.x",uptimer:()=>Promise.resolve(Math.random()*10),httpEndpoint:"http://localhost:3001",wsEndpoint:"ws//localhost:3000",address:{hopr:"16Uiu2HAmE9b3TSHeF25uJS1Ecf2Js3TutnaSnipdV9otEpxbRN8Q",native:"0xEA9eDAE5CfC794B75C45c8fa89b605508A03742a"}}]},domain:"localhost"})})}),e(b,{children:e(u,{children:Object.keys(o).map(a=>e(U,{host:a,nodes:r,domain:o[a].domain},a))})})]})]}),e(X,{children:p(ee,{children:[e(y,{placeholder:"node host e.g. https://hoprnet-hoprnet-j4zbg3yajqp.ws-eu31.gitpod.io/ or localhost",value:t,onChange:a=>n(a.target.value),onKeyPress:D}),e(y,{placeholder:"^^LOCAL-testing-123^^",value:f,onChange:a=>_(a.target.value)})]})})]})}he.render(e(ue.StrictMode,{children:e(me,{children:e(Ne,{})})}),document.getElementById("root"));
